local TweenService = game:GetService("TweenService")

local Library = {}
Library.__index = Library

Library.Theme = {
	Background = Color3.fromRGB(25, 25, 25),
	Accent = Color3.fromRGB(0, 120, 255),
	Text = Color3.fromRGB(255, 255, 255)
}

function Library:CreateWindow(opts)
	local self = setmetatable({}, Library)

	local guiName = opts.Name or "ExecutorUI"

	for _, v in pairs(game:GetService("CoreGui"):GetChildren()) do
		if v:IsA("ScreenGui") and v.Name == guiName then
			v:Destroy()
		end
	end

	local screenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
	screenGui.Name = guiName
	screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	screenGui.ResetOnSpawn = false

	local main = Instance.new("Frame", screenGui)
	main.Size = UDim2.new(0, 500, 0, 400)
	main.Position = UDim2.new(0.5, -250, 0.5, -200)
	main.BackgroundColor3 = Library.Theme.Background
	main.Name = "Main"
	main.BorderSizePixel = 0
	main.BackgroundTransparency = 1

	local title = Instance.new("TextLabel", main)
	title.Size = UDim2.new(1, 0, 0, 40)
	title.Text = opts.Name or "Executor Hub"
	title.BackgroundTransparency = 1
	title.TextColor3 = Library.Theme.Text
	title.Font = Enum.Font.GothamBold
	title.TextScaled = true
	title.TextTransparency = 1

	TweenService:Create(main, TweenInfo.new(0.5), {BackgroundTransparency = 0}):Play()
	TweenService:Create(title, TweenInfo.new(0.5), {TextTransparency = 0}):Play()

	self.Main = main
	self.Tabs = {}

	function self:CreateTab(tabName)
		local tab = Instance.new("Frame", main)
		tab.Name = tabName
		tab.BackgroundTransparency = 1
		tab.Size = UDim2.new(1, 0, 1, -40)
		tab.Position = UDim2.new(0, 0, 0, 40)

		local layout = Instance.new("UIListLayout", tab)
		layout.Padding = UDim.new(0, 8)
		layout.SortOrder = Enum.SortOrder.LayoutOrder

		local tabObj = {}

		function tabObj:AddButton(text, callback)
			local btn = Instance.new("TextButton", tab)
			btn.Size = UDim2.new(0, 200, 0, 40)
			btn.Text = text
			btn.BackgroundColor3 = Library.Theme.Accent
			btn.TextColor3 = Library.Theme.Text
			btn.Font = Enum.Font.Gotham
			btn.TextScaled = true
			btn.BackgroundTransparency = 1
			btn.TextTransparency = 1

			TweenService:Create(btn, TweenInfo.new(0.4), {
				BackgroundTransparency = 0,
				TextTransparency = 0
			}):Play()

			btn.MouseButton1Click:Connect(callback)
		end

		table.insert(self.Tabs, tab)
		return tabObj
	end

	return self
end

return Library
